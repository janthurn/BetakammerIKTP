Code for the workings simulation
